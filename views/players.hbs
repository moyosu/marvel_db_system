{{#> layout title="PlayerS Page"}}
    <div class="filter-container">
        <label for="dropdown-filter">Filter by Rank:</label>
        <select id="dropdown-filter" onchange="filterPlayers()">
            <option value="all">All Ranks</option>
            <option value="Eternal">Eternal</option>
            <option value="Celestial">Celestial</option>
            <option value="GrandMasters">GrandMasters</option>
            <option value="Diamond">Diamon</option>
            <option value="Plat">Plat</option>
            <option value="Gold">Gold</option>
            <option value="Silver">Silver</option>
            <option value="Bronze">Bronze</option>
        </select>
    </div>

    <div id="browse">
        <h3 class="table-name">Browse Players</h3>
        
        <div class="table-container">
            <table border="1" cellpadding="5">
                <tr class="table-header">
                    <th class="new-button"><a href="#" onClick="showForm('insert')">New</a></th>
                    <th></th>
                    {{#each data.[0]}}
                    <th>
                        {{@key}}
                    </th>
                    {{/each}}
                </tr>
                {{!-- Dynamically populate the table rows --}}
                {{#each data}}
                <tr>
                    <td><a href="#" onClick="showForm('update', {{this.player_id}})">Edit</a></td>
                    <td><a href="#" onclick="showForm('delete', {{this.player_id}})">Delete</a></td>
                    <td>{{this.[Player ID]}}</td>
                    <td>{{this.Player}}</td>
                    <td>{{this.Rank}}</td>
                </tr>
                {{/each}}
            </table>
        </div>
    </div>

    <!-- Add Player Form -->
    <div id="insert" class="form-container hidden">
        <h3 class="modal">Add a New Player</h3>
        <form id="add-player-form-ajax">
            <label class="modal-label">Player Name</label>
            <input type="text" name="player-name-input" id="player-name-input">
            
            <label class="modal-label">Rank</label>
            <input type="text" name="player-rank-input" id="player-rank-input">
            
            <button type="button" onClick="showForm('browse')">Cancel</button>
            <button type="submit">Add Player</button>
        </form>
    </div>

    <!-- Include add_player.js script -->
    <script src="/js/add_player.js"></script>

    <!-- Edit Player Form -->
    <div id="update" class="form-container hidden" id="add-player-for">
        <h3 class="modal">Edit Player</h3>
        <label class="modal-label">Player ID</label>
        <input type="text" id="edit-player-id-input" value="4">

        <label class="modal-label">Player Name</label>
        <input type="text" id="edit-player-name-input" value="Zyverous">
        
        <label class="modal-label">Rank</label>
        <input type="text" id="edit-player-rank-input" value="GrandMaster">
        
        <button onClick="showForm('browse')">Cancel</button>
        <button onClick="saveChanges()">Save Changes</button>
    </div>

    <!-- Delete Confirmation -->
    <div id="delete" class="form-container hidden">
        <h3 class="modal">Are you sure you want to delete this player?</h3>
        <p class="modal-label">Player ID: <span id="delete-message"></span></p>
        <button onClick="showForm('browse')">Cancel</button>
        <button onClick="confirmDelete()">Delete</button>
    </div>
    {{/layout}}